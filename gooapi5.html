<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<link href="Slim_Header/header.css" rel="stylesheet" type="text/css" />
<style type="text/css">
    body {
        margin-left: 0px;
        margin-top: 0px;
        margin-right: 0px;
        margin-bottom: 0px;
    }
</style>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Google Maps JavaScript API Example</title>
    <script type="text/javascript" src="scripts/plusminus.js"></script>
    <script src="http://www.google.com/uds/api?file=uds.js&v=1.0&key=ABQIAAAAcU4W0SxvtACcZE2LNL5tMhQOjAQj1TDVieadEub6KQQllOqtmRQlZxJIcWkImOAv2IHj2_p0dx4emQ" type="text/javascript"></script>      
    <script src="http://www.google.com/uds/solutions/localsearch/gmlocalsearch.js" type="text/javascript"></script>

    <style type="text/css">
      @import url("http://www.google.com/uds/css/gsearch.css");
      @import url("http://www.google.com/uds/solutions/localsearch/gmlocalsearch.css");
    </style>

    <link href="main.css" rel="stylesheet" type="text/css" />  
    
    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAcU4W0SxvtACcZE2LNL5tMhQOjAQj1TDVieadEub6KQQllOqtmRQlZxJIcWkImOAv2IHj2_p0dx4emQ" type="text/javascript">
    </script>

    <script>
    window.onload = function() {
          menuinit();
        }
    </script>


</head>
  <body onunload="GUnload()">
  
  <div id="thinSearchbar">
	<a href="http://www.washington.edu/"><img id="lgo" src="Slim_Header/w.gif" alt="University of Washington"/></a>  
<div id="rhtlnks">
      <form class=formation name=form1 id="searchbox_001967960132951597331:04hcho0_drk" 
			action="http://www.google.com/cse">
        <input type="hidden" name="cx" value="001967960132951597331:04hcho0_drk" />
        <input type="hidden" name="cof" value="FORID:0" />
        <input name="q" type="text" size="20" value="Enter Search" onClick="make_blank();"/>
        <input type="submit" name="sa" value="Go" />
      </form>
      <div id="searcha">
        <ul>
          <li><a href="http://www.washington.edu/discovery/about.html">About Us</a>&nbsp;&nbsp;<span class="barLeft">|</span></li>
          <li><a href="http://www.uwnews.org/">News</a>&nbsp;&nbsp;<span class="barLeft">|</span></li>
          <li><a href="http://gohuskies.ocsn.com/">Sports</a>&nbsp;&nbsp;<span class="barLeft">|</span></li>
          <li><a href="http://www.washington.edu/alumni/">Alumni</a>&nbsp;&nbsp;<span class="barLeft">|</span></li>
          <li><a href="http://myuw.washington.edu/">MyUW</a>&nbsp;&nbsp;<span class="barLeft">|</span></li>
          <li><a href="http://www.washington.edu/home/directories.html">Directories</a>&nbsp;&nbsp;<span class="barLeft">|</span></li>
          <li><a href="http://www.washington.edu/visit/events.html">Calendar</a></li>
        </ul>
      </div>
    </div>

  </div>
  
    <div id="entire">

      <div id="nav"><br />
	      
        <div id="searcher">
	        <form class="theForm" name=formA id="searchbox_001967960132951597331:04hcho0_drk" 
		action="http://www.google.com/cse">
	          <input type="hidden" name="cx" value="001967960132951597331:04hcho0_drk" />
	          <input type="hidden" name="cof" value="FORID:0" />
	          <input name="q" id="goBox2" type="text" size="30" value="Enter Search" onClick="make_blank();"/>
	          <input id="goBox" type="submit" name="sa" value="Go" />
            </form>
      </div> 
        
    <div id="or"> -- or -- </div>
         
	<select name="buildingList" size="1" class="gmls-no-results-label">
	  <option selected="selected">Select a building...</option>
	  <option id="academicbox" onclick="boxclick(this,'academic')">Academic Computer Center</option>
	  <option id="aerodynamicsbox" onclick="show(this.id)">Aerodynamics Lab</option>
	<option id="allenbox" onclick="show(this.id)">Allen Library </option>
	  <option id="alumnibox" onclick="show(this.id)">Alumni House</option>
	  <option id="andersonbox" onclick="show(this.id)">Anderson Hall</option>
	
	  <option>Bank of America Exec Ed Ctr</option>
      
  
	</select>

      
  <br />
  <br />
  
  
  	  <div id="dotted">
	      <ul>
	        <li>
	          <a id="fParking" class="forms" href="#" onclick="menuexpand('m1'); return false;"><label><input class="checky" type="checkbox" id="parkingbox" onclick="boxclick(this,'parking')" /></label>Parking<img id="pm1" src="" alt=""></a>
	          <ul id="m1">
	            <li><form method="post" action="" class="subforms"><p>
	              <label><input type="checkbox" id="bus" /></label>
	              Motorcycle parking lots</p></form>
                </li>
                                       
                   <li><form method="post" action="" class="subforms"><p>
                       <label><input type="checkbox" id="bus" /></label>
                        Unrestricted parking lots</p></form>
				  </li>
                              
                  <li><form method="post" action="" class="subforms"><p>
                       <label><input type="checkbox" id="bus" /></label>Campus gatehouses</p>
     							   </form>
				  </li><br />
              </ul>
            </li>
                    
                  
            <li>
              <a id="fBus" class="forms" href="#" onclick="menuexpand('m2'); return false;"><label><input class="checky" type="checkbox" id="busbox" onclick="busclick(this,'bus')" /></label>Bus Stops<img id="pm2" src="" alt=""></a>
                    <ul id="m2">
                        <li><form method="post" action="" class="subforms"><p>
                          <label><input type="checkbox" id="bus" /></label>
                          Sound Transit</p></form>
                        </li>
                                       
                        <li><form method="post" action="" class="subforms"><p>
                             <label><input type="checkbox" id="bus" /></label>
                              Metro</p></form>
   					    </li><br />                        
                   </ul>
            </li>      
            
            <li>
					<a id="fEmergency" class="forms" href="#"><label><input class="checky" type="checkbox" id="emergencybox" onclick="boxclick(this,'emergency')" /></label>Emergency Phone</a>
            </li>   
            
            <li>
              <a id="fATM" class="forms" href="#"><label><input class="checky" type="checkbox" id="atmbox" onclick="boxclick(this,'atm')" /></label>ATM</a>
            </li>  
            
            <li>
              <a id="fLibraries" class="forms" href="#"><label><input class="checky" type="checkbox" id="librariesbox" onclick="boxclick(this,'libraries')" /></label>Libraries</a>
            </li>  
            
            <li>
              <a id="fZip" class="forms" href="#"><label><input class="checky" type="checkbox" id="zipbox" onclick="boxclick(this,'zip')" /></label>Zip Cars</a>
            </li>  
            
            <li>
              <a id="fWi" class="forms" href="#"><label><input class="checky" type="checkbox" id="wifibox" onclick="boxclick(this,'wifi')" /></label>Wi-Fi Hotspots</a>
            </li>     
              
            <li>
              <a id="fBike" class="forms" href="#"><label><input class="checky" type="checkbox" id="bikebox" onclick="boxclick(this,'bike')" /></label>Bike Racks</a>
            </li>   
	    </ul>

          
        <br />
        </div>
      </div>
	  <div id="map"></div>
    </div>
    
    
    
  <script type="text/javascript">
    //<![CDATA[

    if (GBrowserIsCompatible()) {
      var gmarkers = [];
      var gicons = [];



      gicons["parking"] = new GIcon(G_DEFAULT_ICON,"colour086.png");	  
      gicons["bus"] = new GIcon(G_DEFAULT_ICON,"colour086.png");
      gicons["emergency"] = new GIcon(G_DEFAULT_ICON,"colour086.png");
      gicons["atm"] = new GIcon(G_DEFAULT_ICON,"colour086.png");  
      gicons["libraries"] = new GIcon(G_DEFAULT_ICON,"colour086.png");
      gicons["zip"] = new GIcon(G_DEFAULT_ICON,"colour086.png");
      gicons["wifi"] = new GIcon(G_DEFAULT_ICON,"colour086.png");
      gicons["bike"] = new GIcon(G_DEFAULT_ICON,"colour086.png");



      // A function to create the marker and set up the event window
      function createMarker(point,name,html,category) {
        var marker = new GMarker(point,gicons[category]);
        // === Store the category and name info as a marker properties ===
        marker.mycategory = category;                                 
        marker.myname = name;
        GEvent.addListener(marker, "click", function() {
          marker.openInfoWindowHtml(html);
        });
        gmarkers.push(marker);
        return marker;
      }

      // == shows all markers of a particular category, and ensures the checkbox is checked ==
      function show(category) {
        for (var i=0; i<gmarkers.length; i++) {
          if (gmarkers[i].mycategory == category) {
            gmarkers[i].show();
          }
        }
        // == check the checkbox ==
        document.getElementById(category+"box").checked = true;
      }

      // == hides all markers of a particular category, and ensures the checkbox is cleared ==
      function hide(category) {
        for (var i=0; i<gmarkers.length; i++) {
          if (gmarkers[i].mycategory == category) {
            gmarkers[i].hide();
          }
        }
        // == clear the checkbox ==
        document.getElementById(category+"box").checked = false;
        // == close the info window, in case its open on a marker that we just hid
        map.closeInfoWindow();
      }

      // == a checkbox has been clicked ==
      function boxclick(box,category) {
        if (box.checked) {
          show(category);
        } else {
          hide(category);
        }

      }

      function myclick(i) {
        GEvent.trigger(gmarkers[i],"click");
      }



      // create the map
      var map = new GMap2(document.getElementById("map"));
      map.addControl(new GLargeMapControl());
      map.addControl(new GMapTypeControl());
      map.setCenter(new GLatLng(47.65565,-122.30817), 17);


   	  // ground overlay
	  var boundaries = new GLatLngBounds(new GLatLng(47.6465,-122.32565), new GLatLng(47.6641,-122.2881));
	  var oldmap = new GGroundOverlay("http://depts.washington.edu/uweb/map/map3.gif", boundaries);
	  map.addOverlay(oldmap);

      // Read the data
      GDownloadUrl("categories.xml", function(doc) {
        var xmlDoc = GXml.parse(doc);
        var markers = xmlDoc.documentElement.getElementsByTagName("marker");
          
        for (var i = 0; i < markers.length; i++) {
          // obtain the attribues of each marker
          var lat = parseFloat(markers[i].getAttribute("lat"));
          var lng = parseFloat(markers[i].getAttribute("lng"));
          var point = new GLatLng(lat,lng);
          var address = markers[i].getAttribute("address");
          var name = markers[i].getAttribute("name");
          var html = "<b>"+name+"</b><p>"+address;
          var category = markers[i].getAttribute("category");
          // create the marker
          var marker = createMarker(point,name,html,category);
          map.addOverlay(marker);
        }

        // == show or hide the categories initially ==

        hide("emergency");
        hide("parking");		
        hide("bus");
        hide("atm");
        hide("libraries");
        hide("zip");	
        hide("wifi");
        hide("bike");				
		hide("academic");
        hide("aerodynamics");		
        hide("allen");
        hide("alumni");
        hide("anderson");
        hide("architecture");
	
		

      });
    }

    else {
      alert("Sorry, the Google Maps API is not compatible with this browser");
    }
    // This Javascript is based on code provided by the
    // Blackpool Community Church Javascript Team
    // http://www.commchurch.freeserve.co.uk/   
    // http://econym.googlepages.com/index.htm

    //]]>
    </script>
    
    
    
    
    
    
</body>
</html>